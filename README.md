# api_requests
<!--HH-->

Назначение системы
Система будет находить наиболее актуальные навыки для какой либо вакансии (hh api)

Принцип работы системы
Система будет получать данные по вакансиям используя заданные параметры:
1.название вакансии(текст)
2.город(выбирает из выпадающего списка)
3.ключевые слова

После того как получены описания всех вакансий по заданным параметрам, система будет проводит следующий анализ:
название вакансии - vacancy: programmer
город поиска - city: Москва
введенные ключевые слова - keywords: python,java,css,html
количество вакансий - vacancy_count: 757
количество ключевых слов в вакасниях - count_key_words: 1065
средняя зарплата - salary_mean: 173962.0
для ключевых слов выводит название, количество, процент в полученных вакансиях - requirement_count: [{'name': 'html', 'count': 380, 'persent': '35.68%'}, {'name': 'css', 'count': 342, 'persent': '32.11%'}, {'name': 'java', 'count': 304, 'persent': '28.54%'}, {'name': 'python', 'count': 38, 'persent': '3.57%'}]

Результат работы программы сохраняется в файл в формате json
<!--Flask -->
Для программы написан на flask сайт. Функционал сайта:
Главная страница
Контакты
Форма для ввода данных: название вакансии - текст, выбор города - выпадающий список, ключевые слова - текст
Запускается парсинг по введеным параметрам
Результаты выводятся в виде текста на странице результатов:

vacancy: программист
city: Иркутская область
keywords: python,css,html,java
vacancy_count: 105
count_key_words: 187
salary_mean: 74591.0
requirement_count: [{'name': 'java', 'count': 84, 'percent': '44.92%'}, {'name': 'html', 'count': 66, 'percent': '35.29%'}, {'name': 'css', 'count': 30, 'percent': '16.04%'}, {'name': 'python', 'count': 6, 'percent': '3.21%'}]

<!--SQLlite-->
С помощью SQLlite создал базу данных: data
id	vacancy	city	vacancy_count	salary_mean	skill_name	skill_count	skill_percent

С помощью внешних ключей подтягиваются данные с трех других баз(чтобы не дублировать в data повторяющиеся значения):vacancy, city, skills

После ввода на странице Form названия вакансии, выбора города поиска и ввода скиллов запускается парсинг с НН. Записсанные в api_hh.json файл данные попадают в функцию, где происходить запись нужной информации в базу данных hh_api_data.db. После запуска нового поиска процес повторяется. Таким образом получаем программу, которая записывает спарсенные данные в базу данных hh_api_data.db

Также добавил на сайте форму по поиску информации в уже созданной собственной базе данных - form_sql.html и results_sql.html(выводит нужную информацию на странице). В форме вводится название вакансии и выбирается город - по этим двум параметрам производится посик информации в hh_api_data.db и выводится на странице в виде:
(9, 'программист', 'Иркутская область', 74591, 105, 'java', 84, '44.92%')
(10, 'программист', 'Иркутская область', 74591, 105, 'html', 66, '35.29%')
(11, 'программист', 'Иркутская область', 74591, 105, 'css', 30, '16.04%')
(12, 'программист', 'Иркутская область', 74591, 105, 'python', 6, '3.21%')
